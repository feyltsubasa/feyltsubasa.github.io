<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>多項選擇題</title>
    <script>
	
		
		
      // 讀取 JSON 檔案
      fetch('questions.json')
        .then(response => response.json())
        .then(data => {
          const questions = data.questions;
          let currentQuestion = 0;
          let score = 0;
          
          // 顯示一道問題
          function showQuestion() {
            // 打亂答案順序
            const options = shuffle(questions[currentQuestion].options.slice());
            
            // 顯示問題描述和選項
            document.getElementById('question').textContent = questions[currentQuestion].question;
            document.getElementById('option1-label').textContent = options[0];
document.getElementById('option1').value=options[0];
            document.getElementById('option2-label').textContent = options[1];
document.getElementById('option2').value=options[1];
            document.getElementById('option3-label').textContent = options[2];
document.getElementById('option3').value=options[2];
            document.getElementById('option4-label').textContent = options[3];

document.getElementById('option4').value=options[3];
          }
          
          // 打亂陣列順序
          function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
          }
          
          // 檢查答案並顯示下一道問題
          function checkAnswer(selectedOption) {
            if (selectedOption === questions[currentQuestion].answer) {
              score++;
            }
            currentQuestion++;
            if (currentQuestion < questions.length) {
              showQuestion();
            } else {
              showResult();
            }
          }
          
          // 顯示答對率
          function showResult() {
            const result = document.getElementById('result');
            result.textContent = `你答對了 ${score} 題，答對率為 ${Math.round(score / questions.length * 100)}%。`;
            result.style.display = 'block';
            document.getElementById('quiz').style.display = 'none';
          }
          
          // 顯示第一道問題
          showQuestion();
          
          // 處理提交表單事件
          document.getElementById('quiz').addEventListener('submit', (event) => {
            event.preventDefault();
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if (selectedOption) {
              checkAnswer(selectedOption.value);
            }
          });
        });
    </script>
  </head>
  <body>
	<div width="50%">
    <h1 align="center">多項選擇題</h1> 
		<h2 align="center" id="countdown">剩餘時間：3分0秒</h2>
    <form id="quiz">
      <p id="question"></p>
      <label for="option1"><input type="radio" name="option" id="option1" value="1"><span id="option1-label"></span></label><br>
      <label for="option2"><input type="radio" name="option" id="option2" value="2"><span id="option2-label"></span></label><br>
      <label for="option3"><input type="radio" name="option" id="option3" value="3"><span id="option3-label"></span></label><br>
      <label for="option4"><input type="radio" name="option" id="option4" value="4"><span id="option4-label"></span></label><br>
      <input type="submit" value="提交">
    </form>
    <p id="result" style="display: none;"></p>
	</div>
			<script>
				 // 設定倒數時間為三分鐘，單位為毫秒
      var countdownTime = 3 * 60 * 1000;

      // 取得倒數計時器的 DOM 元素
      var countdownElement = document.getElementById("countdown");

      // 開始倒數計時器
      var countdownInterval = setInterval(function() {
        // 取得目前時間
        var now = new Date().getTime();

        // 計算剩餘時間
        var distance = countdownTime - now;

        // 轉換剩餘時間為分鐘和秒數
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // 更新倒數計時器顯示的內容
        countdownElement.innerHTML = "剩餘時間：" + minutes + "分" + seconds + "秒";

        // 如果時間到了，停止倒數計時器
        if (distance < 0) {
          clearInterval(countdownInterval);
          countdownElement.innerHTML = "時間到！";
		  showResult()
        }
      }, 1000);
			</script>
  </body>
</html>