<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>多項選擇題</title>
    <script>
	
		
		
      // 讀取 JSON 檔案
      fetch('questions.json')
        .then(response => response.json())
        .then(data => {
          const questions = data.questions;
          let currentQuestion = 0;
          let score = 0;
          
          // 顯示一道問題
          function showQuestion() {
            // 打亂答案順序
            const options = shuffle(questions[currentQuestion].options.slice());
            
            // 顯示問題描述和選項
            document.getElementById('question').textContent = questions[currentQuestion].question;
            document.getElementById('option1-label').textContent = options[0];
document.getElementById('option1').value=options[0];
            document.getElementById('option2-label').textContent = options[1];
document.getElementById('option2').value=options[1];
            document.getElementById('option3-label').textContent = options[2];
document.getElementById('option3').value=options[2];
            document.getElementById('option4-label').textContent = options[3];

document.getElementById('option4').value=options[3];
          }
		   // 打亂Q陣列的順序
          function shuffleArray(array) {
            var currentIndex = array.length, temporaryValue, randomIndex;
            while (0 !== currentIndex) {
              randomIndex = Math.floor(Math.random() * currentIndex);
              currentIndex -= 1;
              temporaryValue = array[currentIndex];
              array[currentIndex] = array[randomIndex];
              array[randomIndex] = temporaryValue;
            }
            return array;
          }
          
          // 打亂A陣列順序
          function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
          }
          
          // 檢查答案並顯示下一道問題
          function checkAnswer(selectedOption) {
            if (selectedOption === questions[currentQuestion].answer) {
              score++;
				document.getElementById("result").innerHTML = "答對了！";
            }else{
				document.getElementById("result").innerHTML = "答錯了，正確答案是：" + questions[currentQuestion].answer;
			}
            currentQuestion++;
            if (currentQuestion < questions.length) {
              showQuestion();
            } else {
              showResult();
            }
          }
          
          // 顯示答對率
          function showResult() {
            const result = document.getElementById('result');
			document.getElementById("submit").disabled = true;
              document.getElementById("result2").innerHTML = "恭喜您完成了所有問題！你答對了"+score+"題!";
			   clearInterval(countdownInterval);
           
          }
          
          // 顯示第一道問題
		  shuffleArray(data.questions);
          showQuestion();
          
          // 處理提交表單事件
          document.getElementById('quiz').addEventListener('submit', (event) => {
            event.preventDefault();
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if (selectedOption) {
              checkAnswer(selectedOption.value);
            }
          });
        });
    </script>
  </head>
  <body>
	<div width="50%">
    <h1 align="center">多項選擇題</h1> 
		
    <form id="quiz">
      <p id="question"></p>
      <label for="option1"><input type="radio" name="option" id="option1" value="1"><span id="option1-label"></span></label><br>
      <label for="option2"><input type="radio" name="option" id="option2" value="2"><span id="option2-label"></span></label><br>
      <label for="option3"><input type="radio" name="option" id="option3" value="3"><span id="option3-label"></span></label><br>
      <label for="option4"><input type="radio" name="option" id="option4" value="4"><span id="option4-label"></span></label><br>
      <input id="submit" type="submit" value="提交">
    </form>
    <p id="result"></p>
	  <p id="result2"></p>
    <p id="countdown">剩餘時間：60</p>
		<script>
		  // 設定倒數時間為三分鐘，單位為毫秒
          var countdownTime = 60 
          // 開始倒數計時器
          var countdownInterval = setInterval(function() {
            // 取得目前時間
            var now = new Date().getTime();

            // 計算剩餘時間
            countdownTime = countdownTime - 1;

    

            // 更新倒數計時器顯示的內容
            document.getElementById('countdown').innerHTML = "剩餘時間：" + countdownTime;

            // 如果時間到了，停止倒數計時器
            if (countdownTime <= 0) {
              clearInterval(countdownInterval);
              document.getElementById("submit").disabled = true;
               document.getElementById("result").innerHTML = "時間到！你答對了"+score+"題!";
            }
          }, 1000);

		</script>
	</div>
			
  </body>
</html>