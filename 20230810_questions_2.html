<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>多項選擇題</title>
    <script>
	
		var score = 0;
		
      // 讀取 JSON 檔案
      fetch('20230810_questions.json')
        .then(response => response.json())
        .then(data => {
          const questions = data.questions;
          let currentQuestion = 0;
          
          
          // 顯示一道問題
          function showQuestion() {
            // 打亂答案順序
            const options = shuffle(questions[currentQuestion].options.slice());
            
            // 顯示問題描述和選項
            document.getElementById('question').textContent = questions[currentQuestion].question;
            document.getElementById('option1-label').textContent = options[0];
document.getElementById('option1').value=options[0];
            document.getElementById('option2-label').textContent = options[1];
document.getElementById('option2').value=options[1];
            document.getElementById('option3-label').textContent = options[2];
document.getElementById('option3').value=options[2];
            document.getElementById('option4-label').textContent = options[3];

document.getElementById('option4').value=options[3];
          }
		   // 打亂Q陣列的順序
          function shuffleArray(array) {
            var currentIndex = array.length, temporaryValue, randomIndex;
            while (0 !== currentIndex) {
              randomIndex = Math.floor(Math.random() * currentIndex);
              currentIndex -= 1;
              temporaryValue = array[currentIndex];
              array[currentIndex] = array[randomIndex];
              array[randomIndex] = temporaryValue;
            }
            return array;
          }
          
          // 打亂A陣列順序
          function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
          }
          
          // 檢查答案並顯示下一道問題
          
		  function checkAnswer(selectedOption) {
			  
            if (selectedOption === questions[currentQuestion].answer) {
              score++;
				document.getElementById('s').innerHTML ="現時分數:"+score+"/3";
				document.getElementById("result").innerHTML = "答對了！";
            }else{
				document.getElementById("result").innerHTML = "答錯了，正確答案是：" + questions[currentQuestion].answer;
			}
            			  document.getElementById("option1").disabled = true;
document.getElementById("option2").disabled = true;
document.getElementById("option3").disabled = true;
document.getElementById("option4").disabled = true;
document.getElementById("submit").disabled = true;
		  document.getElementById("submit2").disabled = false;
		  }
		  
			  

          
          
          // 顯示答對率
          function showResult() {
            
			    document.getElementById("option1").disabled = true;
document.getElementById("option2").disabled = true;
document.getElementById("option3").disabled = true;
document.getElementById("option4").disabled = true;
			 document.getElementById("submit2").disabled = true;
			   document.getElementById("end").hidden = false;
			  document.getElementById("s").innerHTML = "";
            document.getElementById('quiz').innerHTML ="恭喜!你已經完成遊戲。";
          }
		  
		  
          function nextQ(array){
			  document.getElementById("result").innerHTML = "";
			    document.getElementById("option1").checked = false;
document.getElementById("option2").checked = false;
document.getElementById("option3").checked = false;
document.getElementById("option4").checked = false;
			  if(score<3){
			   shuffleArray(array);
          	showQuestion();
			  document.getElementById("submit2").disabled = true;
			  document.getElementById("submit").disabled = false;
			  document.getElementById("option1").disabled = false;
				document.getElementById("option2").disabled = false;
				document.getElementById("option3").disabled = false;
				document.getElementById("option4").disabled = false;
			  
		  }else{
			  showResult()
		  }}
          // 顯示第一道問題
		  shuffleArray(data.questions);
          showQuestion();
		  
		  
		  
		  document.getElementById("submit2").onclick = function() {nextQ(data.questions)};
		  document.getElementById("submit2").disabled = true;
		  
		 
          
          // 處理提交表單事件
          document.getElementById('quiz').addEventListener('submit', (event) => {
            event.preventDefault();
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if (selectedOption) {
              checkAnswer(selectedOption.value);
            }
          });
		 
        });

    </script> <style>
	  body{font-size: 30px;
	  overflow: hidden;
	  };
	  input{font-size: 500%};
	  button{font-size:500%}
	  for
	  </style>
  </head>
  <body>
	 
  <div width="50%" >
    <h1 align="center">多項選擇題</h1> 
	<table align="center" width="50%">
		<tr><td>
    <form id="quiz" >
      <p id="question"></p>
      <p><label for="option1"><input type="radio" name="option" id="option1" value="1"><span id="option1-label"></span></label></p>
      <p><label for="option2"><input type="radio" name="option" id="option2" value="2"><span id="option2-label"></span></label></p>
      <p><label for="option3"><input type="radio" name="option" id="option3" value="3"><span id="option3-label"></span></label></p>
     <p> <label for="option4"><input type="radio" name="option" id="option4" value="4"><span id="option4-label"></span></label></p>
      <p><input id="submit" style="font-size: 30px" type="submit" value="提交"></p>
		
		</form>
		<BR>
		
    <p id="result"></p>
	  <p id="result2"></p>
			<img src="/images/20230808_heart.png" width="200px" style="z-index: 5;  position: fixed; margin-left: 40%">
			
			</td></tr>
			<tr><td>
				<p id="s">現時分數:0/3</p>
			<p ><button  style="font-size: 30px" id="submit2" type="submit" >下一題</button> <button hidden="true" id="end" onclick="location.reload()"  style="font-size: 30px" id="submit2" type="submit" >重開一局</button></p>
   </td></tr></table>
  </div>
			
  </body>
</html>