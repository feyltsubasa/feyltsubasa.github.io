<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>填空題問題庫</title>
</head>
<body>
  <h1>填空題問題庫</h1>
<h2 id="countdown">61</h2>
  <form id="quiz-form">
    <div>
      <label for="question">問題：</label>
      <p id="question"></p>
    </div>
    <div>
      <label for="answer">答案：</label>
      <input type="text" id="answer" required>
    </div>
    <button type="submit">提交</button>
  </form>

  <div id="result"></div>
  <div id="score"></div>

	<script>
	// 獲取填空題問題庫
fetch('quiz.json')
  .then(response => response.json())
  .then(quiz => {
    // 將問題順序隨機打亂
    const shuffledQuiz = quiz.questions.sort(() => Math.random() - 0.5);

    // 取得HTML元素
    const quizForm = document.querySelector('#quiz-form');
    const questionEl = document.querySelector('#question');
    const answerEl = document.querySelector('#answer');
    const resultEl = document.querySelector('#result');
    const scoreEl = document.querySelector('#score');

    let currentQuestionIndex = 0;
    let correctAnswers = 0;
	var countdownTime = 1 * 60 
	if (countdownTime <= 0) {
		countdownTime = countdownTime - 1;

		// 更新倒數計時器顯示的內容
		countdownElement.innerHTML = "剩餘時間：" + countdownTime;

		// 如果時間到了，停止倒數計時器

		  clearInterval(countdownInterval);
		  submitElement.disabled = true;
		  resultElement.innerHTML = "時間到！";
		}
	  }, 1000);
	
    // 顯示問題和答案框
    function showQuestion() {
      const currentQuestion = shuffledQuiz[currentQuestionIndex];
      questionEl.textContent = currentQuestion.question;
    }

    // 設置答案驗證
    function checkAnswer() {
      const currentQuestion = shuffledQuiz[currentQuestionIndex];
      const userAnswer = answerEl.value.trim().toLowerCase();
      const correctAnswer = currentQuestion.correctAnswer.toLowerCase();

      if (userAnswer === correctAnswer) {
        resultEl.textContent = '答對了！';
        correctAnswers++;
      } else {
        resultEl.textContent = `答錯了，正確答案是：${currentQuestion.correctAnswer}`;
      }

      answerEl.value = '';
      currentQuestionIndex++;

      if (currentQuestionIndex < shuffledQuiz.length) or (countdownTime = 0){
        showQuestion();
      } else {
        // 顯示最終答對率
        const score = Math.round((correctAnswers / shuffledQuiz.length) * 100);
        scoreEl.textContent = `你的答對率是：${score}%`;
        quizForm.style.display = 'none';
      }
    }

    // 設置表單提交
    quizForm.addEventListener('submit', event => {
      event.preventDefault();
      checkAnswer();
    });

    // 開始顯示問題
    showQuestion();

    // 計算剩餘時間
			
  .catch(error => console.error(error));
	</script>
</body>
</html>